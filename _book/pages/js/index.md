# js

> JavaScript ( JS ) 是一种具有函数优先的轻量级，解释型或即时编译型的编程语言。虽然它是作为开发 Web 页面的脚本语言而出名的，但是它也被用到了很多非浏览器环境中，例如 Node.js、 Apache CouchDB 和 Adobe Acrobat。JavaScript 是一种基于原型编程、多范式的动态脚本语言，并且支持面向对象、命令式和声明式（如函数式编程）风格。了解更多 JavaScript。

## 编译原理

1. 分词/词法分析(Tokenizing/Lexing)  
   将由字符组成的字符串分解成(对编程语言来说)有意义的代码块，这些代码块被称为词法单元(token)
2. 解析/语法分析(Parsing)
   将词法单元流(数组)转换成一个有元素逐级嵌套所组成的代表了程序语法结构的树(抽象语法树 AST)
3. 代码生成
   将 AST 转换为可执行代码

## 变量作用域

> 当代码在一个环境中执行时，会创建变量对象的一个作用域链（ scope chain）。作用域链的用途，是保证对执行环境有权访问的所有变量和函数的有序访问。作用域链的前端，始终都是当前执行的代码所在环境的变量对象。如果这个环境是函数，则将其活动对象（ activation object）作为变量对象。活动对象在最开始时只包含一个变量，即 arguments 对象（这个对象在全局环境中是不存在的）。作用域链中的下一个变量对象来自包含（外部）环境，而再下一个变量对象则来自下一个包含环境。这样，一直延续到全局执行环境；全局执行环境的变量对象始终都是作用域链中的最后一个对象。

> 标识符解析是沿着作用域链一级一级地搜索标识符的过程。搜索过程始终从作用域链的前端开始，然后逐级地向后回溯，直至找到标识符为止（如果找不到标识符，通常会导致错误发生）

1. 引擎 ： 负责整个 js 程序的编译及执行过程
2. 编译器 ：负责语法分析及代码生成等
3. 作用域 ： 负责收集并维护由所有声明的标识符(变量)组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限

### 变量的赋值 var a = 2

1. LHS ：找到变量的容器本身，从而可以对其赋值
   - 赋值操作的目标是谁
2. RHS ：查找某个变量的值， RHS 并不是真正意义上的`赋值操作的右侧`，更准确地说是`非左侧`
   - 赋值操作的源头

### 总结
1. 作用域是一套规则，用于确定在何处以及如何查找变量(标识符)，如果查找的目的是对变量进行赋值，就会使用LHS查询。如果目的是获取变量的值，就会使用RHS查询
2. 赋值操作会导致LHS查询
3. =操作符或调用函数时传入参数的操作都会导致关联作用域的赋值操作

## 词法作用域

1. 作用域共有两种主要的工作模型
    - 词法作用域 ： 定义在词法阶段的作用域，在写代码时将变量和块作用域写在哪里决定的，因此当词法分析其处理代码时会保持作用域不变
    - 动态作用域



## 提升

1. 函数优先

## 闭包

1. 当函数可以记住并访问所在的词法作用域时，就产生了闭包，即使函数是在当前词法作用域之外执行的

## 严格模式

## 执行环境

1. 执行环境定义了变量或函数有权访问的其他数据，决定了他们各自的行为
2. 每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中
